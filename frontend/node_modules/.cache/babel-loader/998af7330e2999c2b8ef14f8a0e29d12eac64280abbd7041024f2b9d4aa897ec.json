{"ast":null,"code":"import _objectSpread from\"C:/Users/altha/Desktop/PyProjects/Django React Notes/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/altha/Desktop/PyProjects/Django React Notes/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/altha/Desktop/PyProjects/Django React Notes/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/altha/Desktop/PyProjects/Django React Notes/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var match=_ref.match,history=_ref.history;var noteId=match.params.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/create/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/update\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}},_callee3);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete\"),{method:'DELETE',headers:{'Content-Type':'application/json'}});history.push('/');case 2:case\"end\":return _context4.stop();}},_callee4);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!=='new'&&note.body==''){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId=='new'&&note.body!==null){createNote();}history.push('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\" Delete \"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\" Done \"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},defaultValue:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useEffect","useState","Link","ReactComponent","ArrowLeft","jsx","_jsx","jsxs","_jsxs","NotePage","_ref","match","history","noteId","params","id","_useState","_useState2","_slicedToArray","note","setNote","getNote","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","abrupt","fetch","concat","sent","json","stop","apply","arguments","createNote","_ref3","_callee2","_callee2$","_context2","method","headers","body","JSON","stringify","updateNote","_ref4","_callee3","_callee3$","_context3","deleteNote","_ref5","_callee4","_callee4$","_context4","push","handleSubmit","className","children","onClick","onChange","e","_objectSpread","target","value","defaultValue"],"sources":["C:/Users/altha/Desktop/PyProjects/Django React Notes/mynotes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\r\n\r\nconst NotePage = ({match , history}) => {\r\n  \r\n    let noteId = match.params.id\r\n\r\n    let [note , setNote] = useState(null)\r\n\r\n    useEffect (() => {\r\n        getNote()\r\n    }, [noteId])\r\n\r\n    let getNote = async () => {\r\n        if (noteId === 'new') return\r\n        let response = await fetch(`/api/notes/${noteId}/`)\r\n        let data = await response.json()\r\n        setNote(data)\r\n    }\r\n\r\n    let createNote = async () => {\r\n        fetch(`/api/notes/create/` , {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(note)\r\n\r\n        })\r\n    }\r\n\r\n    let updateNote = async () => {\r\n        fetch(`/api/notes/${noteId}/update` , {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(note)\r\n\r\n        })\r\n    }\r\n\r\n    let deleteNote = async () => {\r\n        fetch(`/api/notes/${noteId}/delete`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        history.push('/')\r\n    }\r\n\r\n    let handleSubmit = ()=> {\r\n        if (noteId !== 'new' && note.body == ''){\r\n            deleteNote()\r\n        } else if (noteId !== 'new') {\r\n            updateNote()\r\n        } else if (noteId == 'new' && note.body !== null) {\r\n            createNote()\r\n        }\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n    <div className='note'>\r\n        <div className='note-header'>\r\n            <h3>    \r\n                <ArrowLeft onClick={handleSubmit}/>\r\n            </h3>\r\n            {noteId !== 'new' ? (\r\n                 <button onClick={deleteNote}> Delete </button>\r\n            ) : (\r\n                <button onClick={handleSubmit}> Done </button>\r\n            )}\r\n        </div>\r\n        <textarea onChange={(e) => {setNote({...note, 'body': e.target.value})}} defaultValue={note?.body}></textarea>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}